<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slide 12 - Homework</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background: #f8fafc;
            overflow-y: auto;
            padding: 2rem;
            min-height: 100vh;
        }

        .wheel-container {
            position: relative;
            width: 300px;
            height: 300px;
            margin: 0 auto;
        }

        .spin-btn {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            border: 4px solid white;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            z-index: 10;
            cursor: pointer;
        }

        .marker {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 30px;
            fill: #ef4444;
            z-index: 20;
        }

        .pink-card {
            background: #fdf2f8;
            border: 1px solid #fbcfe8;
            border-radius: 1.5rem;
            padding: 2rem;
            text-align: center;
            max-width: 500px;
            margin: 2rem auto;
        }
    </style>
</head>

<body>

    <div class="text-center mb-10">
        <h1 class="text-4xl font-black text-slate-800 mb-4">Homework</h1>
        <p class="text-xl text-slate-600">Spin the wheel and write down 3 sentences!</p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-10 max-w-5xl mx-auto items-center">

        <!-- Left: Wheel -->
        <div>
            <div class="wheel-container">
                <svg class="marker" viewBox="0 0 24 24">
                    <path d="M12 22L2 2h20L12 22z" />
                </svg>
                <svg id="wheel" viewBox="0 0 100 100" class="w-full h-full"></svg>
                <button id="spin-btn" class="spin-btn text-xs text-indigo-600">SPIN</button>
            </div>
            <div id="result" class="text-center mt-6 text-2xl font-black text-indigo-600 min-h-[40px]"></div>
        </div>

        <!-- Right: Padlet Link -->
        <div class="pink-card">
            <h2 class="text-2xl font-black text-pink-600 mb-4">Padlet Activity</h2>
            <p class="text-slate-700 mb-6">Write 3 sentences using the emotion/intro you got from the wheel. Post it on
                our class Padlet!</p>
            <a href="#"
                class="inline-block px-8 py-3 bg-pink-500 text-white font-bold rounded-xl hover:bg-pink-600 shadow-lg hover:shadow-pink-500/30 transition transform hover:-translate-y-1">
                Open Padlet
            </a>
        </div>

    </div>

    <script>
        const questions = [
            "I am happy",
            "I am excited",
            "I am tired",
            "I am nervous",
            "I am hungry",
            "I am sad"
        ];
        const colors = ['#fca5a5', '#93c5fd', '#86efac', '#fde047', '#d8b4fe', '#fdba74'];

        const wheel = document.getElementById('wheel');
        let currentRotation = 0;

        function initWheel() {
            let svgContent = '';
            const slice = 360 / questions.length;

            questions.forEach((q, i) => {
                const startAngle = (i * slice) * (Math.PI / 180);
                const endAngle = ((i + 1) * slice) * (Math.PI / 180);
                const cx = 50, cy = 50, r = 50;

                const x1 = cx + r * Math.cos(startAngle);
                const y1 = cy + r * Math.sin(startAngle);
                const x2 = cx + r * Math.cos(endAngle);
                const y2 = cy + r * Math.sin(endAngle);

                const d = `M${cx},${cy} L${x1},${y1} A${r},${r} 0 0,1 ${x2},${y2} Z`;
                svgContent += `<path d="${d}" fill="${colors[i]}" stroke="white" stroke-width="0.5" />`;

                // Text placement
                const textAngle = (i * slice) + (slice / 2);
                const tr = r * 0.65;
                const tx = cx + tr * Math.cos(textAngle * Math.PI / 180);
                const ty = cy + tr * Math.sin(textAngle * Math.PI / 180);
                svgContent += `<text x="${tx}" y="${ty}" fill="#1e293b" font-size="4" font-weight="800" text-anchor="middle" dominant-baseline="middle" transform="rotate(${textAngle + 90}, ${tx}, ${ty})">${q}</text>`;
            });
            wheel.innerHTML = svgContent;
        }

        document.getElementById('spin-btn').addEventListener('click', () => {
            const prizeIndex = Math.floor(Math.random() * questions.length);
            const slice = 360 / questions.length;

            // Target calculation (similar to slide 2 but adjusted for generic n items)
            // Top is 270 (-90). Center of item i is i*slice + slice/2.
            // We want (i*slice + slice/2) + rot = 270
            // rot = 270 - (i*slice + slice/2)

            const centerAngle = (prizeIndex * slice) + (slice / 2);
            const targetRotation = (270 - centerAngle) + (360 * 5);

            const currentMod = currentRotation % 360;
            const dist = targetRotation - currentMod;
            currentRotation += dist + (360 * 5);

            gsap.to('#wheel', {
                rotation: currentRotation,
                duration: 4,
                ease: "power4.out",
                transformOrigin: "50% 50%",
                onComplete: () => {
                    const res = questions[prizeIndex];
                    document.getElementById('result').textContent = res;
                    confetti({ origin: { y: 0.7 } });
                }
            });
        });

        initWheel();
    </script>
</body>

</html>